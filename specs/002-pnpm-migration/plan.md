# Implementation Plan: pnpm Migration

**Branch**: `002-pnpm-migration` | **Date**: 2026-02-18 | **Spec**: [spec.md](spec.md)
**Input**: Feature specification from `/specs/002-pnpm-migration/spec.md`

## Summary

Migrate the project's JavaScript package manager from npm to pnpm across both `frontend/` and `e2e/` directories. This involves replacing lockfiles, updating all scripts and documentation, and verifying all tests pass.

## Technical Context

**Language/Version**: Rust (stable, edition 2024) for backend; TypeScript 5.x for frontend
**Primary Dependencies**: pnpm (replacing npm) as the JavaScript package manager
**Storage**: N/A
**Testing**: cargo test (backend), vitest (frontend), playwright (e2e)
**Target Platform**: macOS / Linux development environments
**Project Type**: Web application (backend + frontend)
**Performance Goals**: N/A — tooling change, no runtime impact
**Constraints**: All 43 existing tests must continue to pass
**Scale/Scope**: 2 JavaScript package directories (frontend/, e2e/), 1 Justfile, documentation files

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Principle | Status | Notes |
|-----------|--------|-------|
| I. Code Quality | PASS | No code changes; only config/tooling files updated |
| II. Testing Standards | PASS | All existing tests must pass post-migration (SC-001) |
| III. UX Consistency | N/A | No user-facing changes |
| IV. Performance | N/A | No runtime impact; tooling change only |

**Quality Gates**:
1. Automated Checks — linting/formatting unaffected (Rust + Biome stay the same)
2. Test Suite — all 43 tests must pass (backend 9 + frontend 27 + e2e 7)
3. Performance — N/A
4. UX Review — N/A
5. Code Review — standard review for config changes

**Gate Result**: PASS — no violations.

## Project Structure

### Documentation (this feature)

```text
specs/002-pnpm-migration/
├── plan.md              # This file
├── research.md          # Phase 0 output (minimal — straightforward migration)
├── quickstart.md        # Phase 1 output (pnpm setup instructions)
└── tasks.md             # Phase 2 output (/speckit.tasks command)
```

### Source Code (repository root)

No new source directories. Files affected:

```text
frontend/
├── package.json         # No changes needed (scripts are manager-agnostic)
├── package-lock.json    # DELETE — replaced by pnpm-lock.yaml
└── pnpm-lock.yaml       # NEW — generated by pnpm install

e2e/
├── package.json         # No changes needed
├── package-lock.json    # DELETE — replaced by pnpm-lock.yaml
└── pnpm-lock.yaml       # NEW — generated by pnpm install

Justfile                 # UPDATE — npm/npx → pnpm/pnpm exec
specs/001-multiplayer-quiz/quickstart.md  # UPDATE — npm references → pnpm
CLAUDE.md                # UPDATE if it references npm
```

**Structure Decision**: No structural changes. This is a tooling migration affecting only lockfiles, scripts, and documentation.
